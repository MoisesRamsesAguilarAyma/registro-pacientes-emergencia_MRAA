<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro de Pacientes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-light">

  <!-- Alerta visual para caso crÃ­tico -->
  <div id="alertaCritico" class="alert alert-danger text-center fw-bold" style="display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1050;">
    âš ï¸ Â¡Nuevo caso crÃ­tico aÃ±adido!
  </div>

  <!-- LOGIN y CREAR CUENTA -->
  <div class="container mt-5" id="authContainer" style="max-width: 500px;">
    <ul class="nav nav-tabs" id="authTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#loginTab" type="button" role="tab" aria-controls="loginTab" aria-selected="true">Iniciar SesiÃ³n</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#registerTab" type="button" role="tab" aria-controls="registerTab" aria-selected="false">Crear Cuenta</button>
      </li>
    </ul>
    <div class="tab-content border border-top-0 p-4 bg-white rounded-bottom" id="authTabsContent">
      <!-- LOGIN -->
      <div class="tab-pane fade show active" id="loginTab" role="tabpanel" aria-labelledby="login-tab">
        <h2 class="text-center text-primary">ğŸ” Acceso a la Clinica del Dr. Chapatin ğŸ”</h2>
        <form id="loginForm" class="mt-4" autocomplete="off" novalidate>
          <div class="mb-3">
            <label for="email" class="form-label">Correo ElectrÃ³nico</label>
            <input type="email" class="form-control" id="email" required />
          </div>
          <div class="mb-3 position-relative">
            <label for="password" class="form-label">ContraseÃ±a</label>
            <input type="password" class="form-control" id="password" required />
            <button type="button" class="btn btn-outline-secondary btn-sm position-absolute top-50 end-0 translate-middle-y me-2" id="toggleLoginPasswordBtn" aria-label="Mostrar/Ocultar contraseÃ±a">ğŸ‘ï¸</button>
            <div class="form-text">MÃ­nimo 8 caracteres, 1 mayÃºscula, 1 nÃºmero y 1 carÃ¡cter especial.</div>
          </div>
          <button type="submit" class="btn btn-primary w-100">Ingresar</button>
        </form>
      </div>

      <!-- REGISTRO -->
      <div class="tab-pane fade" id="registerTab" role="tabpanel" aria-labelledby="register-tab">
        <h2 class="text-center text-success">ğŸ“ Crear Nueva Cuenta</h2>
        <form id="registerForm" class="mt-4" autocomplete="off" novalidate>
          <div class="mb-3">
            <label for="nombres" class="form-label">Nombres</label>
            <input type="text" class="form-control" id="nombres" required />
          </div>
          <div class="mb-3">
            <label for="apellidos" class="form-label">Apellidos</label>
            <input type="text" class="form-control" id="apellidos" required />
          </div>
          <div class="mb-3">
            <label for="registerEmail" class="form-label">Correo ElectrÃ³nico</label>
            <input type="email" class="form-control" id="registerEmail" required />
          </div>
          <div class="mb-3">
            <label for="ciEmpleado" class="form-label">CÃ©dula de Identidad (CI)</label>
            <input type="text" class="form-control" id="ciEmpleado" required />
          </div>
          <div class="mb-3">
            <label for="esEmpleado" class="form-label">Â¿Eres empleado de la clÃ­nica?</label>
            <select class="form-select" id="esEmpleado" required>
              <option value="" disabled selected hidden>Seleccione:-</option>
              <option value="si">SÃ­</option>
              <option value="no">No</option>
            </select>
            <div class="form-text text-danger d-none" id="empleadoError">Solo los empleados pueden crear cuenta.</div>
          </div>
          <div class="mb-3 position-relative">
            <label for="registerPassword" class="form-label">ContraseÃ±a</label>
            <input type="password" class="form-control" id="registerPassword" required />
            <button type="button" class="btn btn-outline-secondary btn-sm position-absolute top-50 end-0 translate-middle-y me-2" id="toggleRegisterPasswordBtn" aria-label="Mostrar/Ocultar contraseÃ±a">ğŸ‘ï¸</button>
            <div class="form-text">MÃ­nimo 8 caracteres, 1 mayÃºscula, 1 nÃºmero y 1 carÃ¡cter especial.</div>
          </div>
          <div class="mb-3 position-relative">
            <label for="confirmPassword" class="form-label">Confirmar ContraseÃ±a</label>
            <input type="password" class="form-control" id="confirmPassword" required />
            <button type="button" class="btn btn-outline-secondary btn-sm position-absolute top-50 end-0 translate-middle-y me-2" id="toggleConfirmPasswordBtn" aria-label="Mostrar/Ocultar contraseÃ±a">ğŸ‘ï¸</button>
          </div>
          <button type="submit" class="btn btn-success w-100">Crear Cuenta</button>
        </form>
      </div>
    </div>
  </div>

  <!-- SISTEMA DE REGISTRO DE PACIENTES (oculto hasta login correcto) -->
  <div class="container mt-4 d-none" id="sistemaPacientes">
    <h1 class="text-center text-primary">ğŸ“‹ Registro de Pacientes - Emergencias (Clinica del Dr. Chapatin)</h1>
    <form id="formularioPaciente" class="mt-4" novalidate>
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label" for="nombre">Nombre Completo</label>
          <input type="text" class="form-control" id="nombre" required />
        </div>
        <div class="col-md-3">
          <label class="form-label" for="edad">Edad</label>
          <input type="number" class="form-control" id="edad" required min="1" step="1" />
        </div>
        <div class="col-md-3">
          <label class="form-label" for="genero">GÃ©nero</label>
          <select class="form-select" id="genero" required>
            <option value="" disabled selected hidden style="color:gray;">Seleccione:-</option>
            <option value="Hombre">Hombre</option>
            <option value="Mujer">Mujer</option>
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label" for="documento">Documento (CI o Pasaporte)</label>
          <input type="text" class="form-control" id="documento" required minlength="5" />
        </div>
        <div class="col-md-6">
          <label class="form-label" for="sintomas">SÃ­ntomas</label>
          <input type="text" class="form-control" id="sintomas" required />
        </div>
        <div class="col-md-6">
          <label class="form-label" for="tratamiento">Tratamiento</label>
          <input type="text" class="form-control" id="tratamiento" required />
        </div>
        <div class="col-md-6">
          <label class="form-label" for="medicamento">Medicamento</label>
          <input type="text" class="form-control" id="medicamento" required />
        </div>
        <div class="col-md-3">
          <label class="form-label" for="examenes">ExÃ¡menes</label>
          <select class="form-select" id="examenes" required>
            <option value="" disabled selected hidden style="color:gray;">Seleccione:-</option>
            <option value="Analisis de Sangre">AnÃ¡lisis de Sangre</option>
            <option value="TomografÃ­a">TomografÃ­a</option>
            <option value="RadiografÃ­a">RadiografÃ­a</option>
            <option value="AnÃ¡lisis Visual">AnÃ¡lisis Visual</option>
            <option value="AnÃ¡lisis Auditivo">AnÃ¡lisis Auditivo</option>
            <option value="Endoscopia">EndoscopÃ­a</option>
            <option value="Ninguno">Ninguno</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label" for="gravedad">Gravedad</label>
          <select class="form-select" id="gravedad" required>
            <option value="" disabled selected hidden style="color:gray;">Seleccione:-</option>
            <option value="leve">ğŸŸ© Leve</option>
            <option value="moderado">ğŸŸ¨ Moderado</option>
            <option value="urgente">ğŸŸ§ Urgente</option>
            <option value="critico">ğŸŸ¥ CrÃ­tico</option>
          </select>
        </div>
      </div>

      <button type="submit" class="btn btn-success mt-3">Registrar Paciente</button>
    </form>

    <hr class="my-4" />

    <h2 class="text-center">
      ğŸ“‘ Lista de Pacientes por Atender
      <button id="ordenarGravedadBtn" class="btn btn-outline-primary btn-sm ms-3">Ordenar Gravedad â¬‡ï¸</button>
    </h2>
    <h5 id="contadorCriticos" class="text-danger text-center mt-2">Casos CrÃ­ticos: 0</h5>

    <table class="table table-bordered mt-3">
      <thead class="table-dark">
        <tr>
          <th>Nombre</th>
          <th>Edad</th>
          <th>GÃ©nero</th>
          <th>Documento</th>
          <th>SÃ­ntomas</th>
          <th>Tratamiento</th>
          <th>Medicamento</th>
          <th>ExÃ¡menes</th>
          <th>Gravedad</th>
          <th>AcciÃ³n</th>
        </tr>
      </thead>
      <tbody id="tablaPacientes"></tbody>
    </table>
  </div>

  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // FunciÃ³n para mostrar/ocultar contraseÃ±a con cambio de Ã­cono
    function setupPasswordToggle(buttonId, inputId) {
      const btn = document.getElementById(buttonId);
      const input = document.getElementById(inputId);

      if (!btn || !input) return;

      btn.addEventListener("click", () => {
        if (input.type === "password") {
          input.type = "text";
          btn.textContent = "ğŸ™ˆ"; // Cambia el Ã­cono a "ojo cerrado"
        } else {
          input.type = "password";
          btn.textContent = "ğŸ‘ï¸"; // Cambia el Ã­cono a "ojo abierto"
        }
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      setupPasswordToggle("toggleLoginPasswordBtn", "password");
      setupPasswordToggle("toggleRegisterPasswordBtn", "registerPassword");
      setupPasswordToggle("toggleConfirmPasswordBtn", "confirmPassword");
    });
  </script>
</body>
</html>
